{"version":3,"sources":["trip-tools.js"],"names":["TripTools","props","reportConfig","reactRouterConfig","startOverUrl","basename","buttons","push","mailto","map","btn","i","Component","CopyUrlButton","_onClick","window","location","href","setState","showCopied","setTimeout","state","PrintButton","printUrl","replace","open","ReportIssueButton","subject","bodyLines","bowser","name","version","osname","osversion","encodeURIComponent","join","defaultProps","LinkButton","url","icon","text","mapStateToProps","ownProps","otp","config","reportIssue","reactRouter"],"mappings":"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","file":"trip-tools.js","sourcesContent":["import React, {Component} from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from 'react-bootstrap'\n// import { DropdownButton, MenuItem } from 'react-bootstrap'\nimport copyToClipboard from 'copy-to-clipboard'\nimport bowser from 'bowser'\n\nclass TripTools extends Component {\n  render () {\n    const { reportConfig, reactRouterConfig } = this.props\n\n    // Determine \"home\" URL\n    let startOverUrl = '/'\n    if (reactRouterConfig && reactRouterConfig.basename) {\n      startOverUrl += reactRouterConfig.basename\n    }\n\n\n    const buttons = []\n\n    buttons.push(<CopyUrlButton />)\n    buttons.push(<PrintButton />)\n    if (reportConfig && reportConfig.mailto) buttons.push(<ReportIssueButton {...reportConfig} />)\n    buttons.push(<LinkButton icon='undo' text='Start Over' url={startOverUrl} />)\n\n    return (\n      <div className='trip-tools'>\n        {buttons.map((btn, i) => {\n          return <div key={i} className='button-container'>{btn}</div>\n        })}\n      </div>\n    )\n  }\n}\n\n\n// Share/Save Dropdown Component -- not used currently\n\n/*\nclass ShareSaveDropdownButton extends Component {\n  _onCopyToClipboardClick = () => {\n    copyToClipboard(window.location.href)\n  }\n\n  render () {\n    return (\n      <DropdownButton\n        className='tool-button'\n        title={<span><i className='fa fa-share' /> Share/Save</span>}\n        id={'tool-share-dropdown'}\n      >\n        <MenuItem onClick={this._onCopyToClipboardClick}>\n          <i className='fa fa-clipboard' /> Copy Link to Clipboard\n        </MenuItem>\n      </DropdownButton>\n    )\n  }\n}\n*/\n\n\n// Copy URL Button\n\nclass CopyUrlButton extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { showCopied: false }\n  }\n\n  _onClick = () => {\n    copyToClipboard(window.location.href)\n    this.setState({ showCopied: true })\n    setTimeout(() => { this.setState({ showCopied: false }) }, 2000)\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {this.state.showCopied\n            ? <span><i className='fa fa-check' /> Copied</span>\n            : <span><i className='fa fa-clipboard' /> Copy Link</span>\n          }\n        </Button>\n      </div>\n    )\n  }\n}\n\n\n// Print Button Component\n\nclass PrintButton extends Component {\n  _onClick = () => {\n    // Note: this is designed to work only with hash routing.\n    const printUrl = window.location.href.replace('#', '#/print')\n    window.open(printUrl, '_blank')\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          <i className='fa fa-print' /> Print\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Report Issue Button Component\n\nclass ReportIssueButton extends Component {\n  static defaultProps = {\n    subject: 'Reporting an Issue with OpenTripPlanner'\n  }\n\n  _onClick = () => {\n    const { mailto, subject } = this.props\n\n    const bodyLines = [\n      '                       *** INSTRUCTIONS TO USER ***',\n      'This feature allows you to email a report to site administrators for review.',\n      `Please add any additional feedback for this trip under the 'Additional Comments'`,\n      'section below and send using your regular email program.',\n      '',\n      'SEARCH DATA:',\n      'Address: ' + window.location.href,\n      'Browser: ' + bowser.name + ' ' + bowser.version,\n      'OS: ' + bowser.osname + ' ' + bowser.osversion,\n      '',\n      'ADDITIONAL COMMENTS:',\n      ''\n    ]\n\n    window.open(`mailto:${mailto}?subject=${subject}&body=${encodeURIComponent(bodyLines.join('\\n'))}`, '_self')\n  }\n\n  render () {\n    return (\n      <Button\n        className='tool-button'\n        onClick={this._onClick}\n      >\n        <i className='fa fa-flag' /> Report Issue\n      </Button>\n    )\n  }\n}\n\n// Link to URL Button\n\nclass LinkButton extends Component {\n  _onClick = () => {\n    window.location.href = this.props.url\n  }\n\n  render () {\n    const { icon, text } = this.props\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {icon && <span><i className={`fa fa-${icon}`} /> </span>}\n          {text}\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Connect main class to redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    reportConfig: state.otp.config.reportIssue,\n    reactRouterConfig: state.otp.config.reactRouter\n  }\n}\n\nexport default connect(mapStateToProps)(TripTools)\n"]}