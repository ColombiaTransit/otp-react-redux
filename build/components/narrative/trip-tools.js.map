{"version":3,"sources":["trip-tools.js"],"names":["TripTools","props","buttonTypes","reportConfig","reactRouterConfig","buttonComponents","forEach","type","push","mailto","startOverUrl","basename","map","btn","i","Component","defaultProps","CopyUrlButton","_onClick","window","location","href","setState","showCopied","setTimeout","state","PrintButton","printUrl","replace","open","ReportIssueButton","subject","bodyLines","bowser","name","version","osname","osversion","encodeURIComponent","join","LinkButton","url","icon","text","mapStateToProps","ownProps","otp","config","reportIssue","reactRouter"],"mappings":"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","file":"trip-tools.js","sourcesContent":["import React, {Component} from 'react'\nimport { connect } from 'react-redux'\nimport { Button } from 'react-bootstrap'\n// import { DropdownButton, MenuItem } from 'react-bootstrap'\nimport copyToClipboard from 'copy-to-clipboard'\nimport bowser from 'bowser'\n\nclass TripTools extends Component {\n\n  static defaultProps = {\n    buttonTypes: [ 'COPY_URL', 'PRINT', 'REPORT_ISSUE', 'START_OVER' ]\n  }\n\n  render () {\n    const { buttonTypes, reportConfig, reactRouterConfig } = this.props\n\n    const buttonComponents = []\n    buttonTypes.forEach((type) => {\n      switch (type) {\n        case 'COPY_URL':\n          buttonComponents.push(<CopyUrlButton />)\n          break\n        case 'PRINT':\n          buttonComponents.push(<PrintButton />)\n          break\n        case 'REPORT_ISSUE':\n          if (!reportConfig || !reportConfig.mailto) break\n          buttonComponents.push(<ReportIssueButton {...reportConfig} />)\n          break\n        case 'START_OVER':\n          // Determine \"home\" URL\n          let startOverUrl = '/'\n          if (reactRouterConfig && reactRouterConfig.basename) {\n            startOverUrl += reactRouterConfig.basename\n          }\n          buttonComponents.push(<LinkButton icon='undo' text='Start Over' url={startOverUrl} />)\n          break\n      }\n    })\n\n    return (\n      <div className='trip-tools'>\n        {buttonComponents.map((btn, i) => <div key={i} className='button-container'>{btn}</div>)}\n      </div>\n    )\n  }\n}\n\n// Share/Save Dropdown Component -- not used currently\n\n/*\nclass ShareSaveDropdownButton extends Component {\n  _onCopyToClipboardClick = () => {\n    copyToClipboard(window.location.href)\n  }\n\n  render () {\n    return (\n      <DropdownButton\n        className='tool-button'\n        title={<span><i className='fa fa-share' /> Share/Save</span>}\n        id={'tool-share-dropdown'}\n      >\n        <MenuItem onClick={this._onCopyToClipboardClick}>\n          <i className='fa fa-clipboard' /> Copy Link to Clipboard\n        </MenuItem>\n      </DropdownButton>\n    )\n  }\n}\n*/\n\n\n// Copy URL Button\n\nclass CopyUrlButton extends Component {\n  constructor (props) {\n    super(props)\n    this.state = { showCopied: false }\n  }\n\n  _onClick = () => {\n    copyToClipboard(window.location.href)\n    this.setState({ showCopied: true })\n    setTimeout(() => { this.setState({ showCopied: false }) }, 2000)\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {this.state.showCopied\n            ? <span><i className='fa fa-check' /> Copied</span>\n            : <span><i className='fa fa-clipboard' /> Copy Link</span>\n          }\n        </Button>\n      </div>\n    )\n  }\n}\n\n\n// Print Button Component\n\nclass PrintButton extends Component {\n  _onClick = () => {\n    // Note: this is designed to work only with hash routing.\n    const printUrl = window.location.href.replace('#', '#/print')\n    window.open(printUrl, '_blank')\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          <i className='fa fa-print' /> Print\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Report Issue Button Component\n\nclass ReportIssueButton extends Component {\n  static defaultProps = {\n    subject: 'Reporting an Issue with OpenTripPlanner'\n  }\n\n  _onClick = () => {\n    const { mailto, subject } = this.props\n\n    const bodyLines = [\n      '                       *** INSTRUCTIONS TO USER ***',\n      'This feature allows you to email a report to site administrators for review.',\n      `Please add any additional feedback for this trip under the 'Additional Comments'`,\n      'section below and send using your regular email program.',\n      '',\n      'SEARCH DATA:',\n      'Address: ' + window.location.href,\n      'Browser: ' + bowser.name + ' ' + bowser.version,\n      'OS: ' + bowser.osname + ' ' + bowser.osversion,\n      '',\n      'ADDITIONAL COMMENTS:',\n      ''\n    ]\n\n    window.open(`mailto:${mailto}?subject=${subject}&body=${encodeURIComponent(bodyLines.join('\\n'))}`, '_self')\n  }\n\n  render () {\n    return (\n      <Button\n        className='tool-button'\n        onClick={this._onClick}\n      >\n        <i className='fa fa-flag' /> Report Issue\n      </Button>\n    )\n  }\n}\n\n// Link to URL Button\n\nclass LinkButton extends Component {\n  _onClick = () => {\n    window.location.href = this.props.url\n  }\n\n  render () {\n    const { icon, text } = this.props\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          {icon && <span><i className={`fa fa-${icon}`} /> </span>}\n          {text}\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Connect main class to redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    reportConfig: state.otp.config.reportIssue,\n    reactRouterConfig: state.otp.config.reactRouter\n  }\n}\n\nexport default connect(mapStateToProps)(TripTools)\n"]}