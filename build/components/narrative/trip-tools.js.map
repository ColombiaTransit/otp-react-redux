{"version":3,"sources":["trip-tools.js"],"names":["TripTools","reportConfig","props","buttons","push","mailto","map","btn","i","classNames","length","join","Component","ShareSaveDropdownButton","_onCopyToClipboardClick","window","location","href","PrintButton","_onClick","printUrl","replace","open","ReportIssueButton","subject","bodyLines","bowser","name","version","osname","osversion","encodeURIComponent","defaultProps","mapStateToProps","state","ownProps","otp","config","reportIssue"],"mappings":"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","file":"trip-tools.js","sourcesContent":["import React, {Component} from 'react'\nimport { connect } from 'react-redux'\nimport { Button, DropdownButton, MenuItem } from 'react-bootstrap'\nimport copyToClipboard from 'copy-to-clipboard'\nimport bowser from 'bowser'\n\nclass TripTools extends Component {\n  render () {\n    const { reportConfig } = this.props\n\n    const buttons = []\n\n    buttons.push(<ShareSaveDropdownButton />)\n    buttons.push(<PrintButton />)\n    if (reportConfig && reportConfig.mailto) {\n      buttons.push(\n        <ReportIssueButton {...reportConfig} />\n      )\n    }\n\n    return (\n      <div className='trip-tools'>\n        {buttons.map((btn, i) => {\n          const classNames = ['button-container']\n          if (i < buttons.length - 1) classNames.push('pad-right')\n          return <div key={i} className={classNames.join(' ')}>{btn}</div>\n        })}\n      </div>\n    )\n  }\n}\n\n// Share/Save Dropdown Component\n\nclass ShareSaveDropdownButton extends Component {\n  _onCopyToClipboardClick = () => {\n    copyToClipboard(window.location.href)\n  }\n\n  render () {\n    return (\n      <DropdownButton\n        className='tool-button'\n        title={<span><i className='fa fa-share' /> Share/Save</span>}\n        id={'tool-share-dropdown'}\n      >\n        <MenuItem onClick={this._onCopyToClipboardClick}>\n          <i className='fa fa-clipboard' /> Copy Link to Clipboard\n        </MenuItem>\n      </DropdownButton>\n    )\n  }\n}\n\n// Print Button Component\n\nclass PrintButton extends Component {\n  _onClick = () => {\n    // Note: this is designed to work only with hash routing.\n    const printUrl = window.location.href.replace('#', '#/print')\n    window.open(printUrl, '_blank')\n  }\n\n  render () {\n    return (\n      <div>\n        <Button\n          className='tool-button'\n          onClick={this._onClick}\n        >\n          <i className='fa fa-print' /> Print\n        </Button>\n      </div>\n    )\n  }\n}\n\n// Report Issue Button Component\n\nclass ReportIssueButton extends Component {\n  static defaultProps = {\n    subject: 'Reporting an Issue with OpenTripPlanner'\n  }\n\n  _onClick = () => {\n    const { mailto, subject } = this.props\n\n    const bodyLines = [\n      '                       *** INSTRUCTIONS TO USER ***',\n      'This feature allows you to email a report to site administrators for review.',\n      `Please add any additional feedback for this trip under the 'Additional Comments'`,\n      'section below and send using your regular email program.',\n      '',\n      'SEARCH DATA:',\n      'Address: ' + window.location.href,\n      'Browser: ' + bowser.name + ' ' + bowser.version,\n      'OS: ' + bowser.osname + ' ' + bowser.osversion,\n      '',\n      'ADDITIONAL COMMENTS:',\n      ''\n    ]\n\n    window.open(`mailto:${mailto}?subject=${subject}&body=${encodeURIComponent(bodyLines.join('\\n'))}`, '_self')\n  }\n\n  render () {\n    return (\n      <Button\n        className='tool-button'\n        onClick={this._onClick}\n      >\n        <i className='fa fa-flag' /> Report Issue\n      </Button>\n    )\n  }\n}\n\n// Connect main class to redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    reportConfig: state.otp.config.reportIssue\n  }\n}\n\nexport default connect(mapStateToProps)(TripTools)\n"]}