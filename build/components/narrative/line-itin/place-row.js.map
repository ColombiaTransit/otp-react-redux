{"version":3,"sources":["place-row.js"],"names":["defaultRouteColor","PlaceRow","leg","mode","backgroundColor","routeColor","props","customIcons","legIndex","place","time","timeOptions","followsTransit","previousLeg","stackIcon","name","color","size","fontSize","icon","interline","interlineWithPreviousLeg","changeVehicles","to","stopId","from","special","rowKey","_createLegLine","split","rentedBike","rentedCar","networks","join","transitLeg","setActiveLeg","companies","legMode","routingType","Component"],"mappings":"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","file":"place-row.js","sourcesContent":["import React, { Component } from 'react'\n\nimport LocationIcon from '../../icons/location-icon'\nimport ViewStopButton from '../../viewers/view-stop-button'\nimport { getLegMode, getPlaceName, isTransit } from '../../../util/itinerary'\nimport { formatTime } from '../../../util/time'\n\nimport TransitLegBody from './transit-leg-body'\nimport AccessLegBody from './access-leg-body'\n\n// TODO: make this a prop\nconst defaultRouteColor = '#008'\n\nexport default class PlaceRow extends Component {\n\n  _createLegLine (leg) {\n    switch (leg.mode) {\n      case 'WALK': return <div className='leg-line leg-line-walk' />\n      case 'BICYCLE':\n      case 'BICYCLE_RENT':\n        return <div className='leg-line leg-line-bicycle' />\n      case 'CAR': return <div className='leg-line leg-line-car' />\n      default:\n        return <div className='leg-line leg-line-transit' style={{\n          backgroundColor: leg.routeColor ? '#' + leg.routeColor : defaultRouteColor\n        }} />\n    }\n  }\n\n  render () {\n    const { customIcons, leg, legIndex, place, time, timeOptions, followsTransit, previousLeg } = this.props\n    const stackIcon = (name, color, size) => <i className={`fa fa-${name} fa-stack-1x`} style={{ color, fontSize: size + 'px' }} />\n\n    let icon\n    if (!leg) { // This is the itinerary destination\n      icon = (\n        <span className='fa-stack place-icon-group'>\n          {stackIcon('circle', 'white', 26)}\n          <LocationIcon type='to' className='fa-stack-1x' style={{ fontSize: 20 }} />\n        </span>\n      )\n    } else if (legIndex === 0) { // The is the origin\n      icon = (\n        <span className='fa-stack place-icon-group'>\n          {stackIcon('circle', 'white', 26)}\n          <LocationIcon type='from' className='fa-stack-1x' style={{ fontSize: 20 }} />\n        </span>\n      )\n    } else { // This is an intermediate place\n      icon = (\n        <span className='fa-stack place-icon-group'>\n          {stackIcon('circle', 'white', 22)}\n          {stackIcon('circle-o', 'black', 22)}\n        </span>\n      )\n    }\n\n    const interline = leg && leg.interlineWithPreviousLeg\n    const changeVehicles = previousLeg && previousLeg.to.stopId === leg.from.stopId && isTransit(previousLeg.mode) && isTransit(leg.mode)\n    const special = interline || changeVehicles\n    return (\n      <div className='place-row' key={this.rowKey++}>\n        <div className='time'>\n          {time && formatTime(time, timeOptions)}\n        </div>\n        <div className='line-container'>\n          {leg && this._createLegLine(leg) }\n          <div>{!special && icon}</div>\n        </div>\n        <div className='place-details'>\n          {/* Dot separating interlined segments, if applicable */}\n          {special && <div className='interline-dot'>&bull;</div>}\n\n          {/* The place name */}\n          <div className='place-name'>\n            {interline\n              ? <div className='interline-name'>Stay on Board at <b>{place.name}</b></div>\n              : changeVehicles\n                ? <div className='interline-name'>Change Vehicles at <b>{place.name}</b></div>\n                : <div>{getPlaceName(place)}</div>\n            }\n          </div>\n\n          {/* Place subheading: Transit stop */}\n          {place.stopId && !special && (\n            <div className='place-subheader'>\n              <span>Stop ID {place.stopId.split(':')[1]}</span>\n              <ViewStopButton stopId={place.stopId} />\n            </div>\n          )}\n\n          {/* Place subheading: rented bike pickup */}\n          {leg && leg.rentedBike && (\n            <div className='place-subheader'>\n              Pick up shared bike\n            </div>\n          )}\n\n          {/* Place subheading: rented car pickup */}\n          {leg && leg.rentedCar && (\n            <div className='place-subheader'>\n              Pick up {leg.from.networks ? leg.from.networks.join('/') : 'rented car'} {leg.from.name}\n            </div>\n          )}\n\n          {/* Show the leg, if present */}\n          {leg && (\n            leg.transitLeg\n              ? (/* This is a transit leg */\n                <TransitLegBody\n                  leg={leg}\n                  legIndex={legIndex}\n                  setActiveLeg={this.props.setActiveLeg}\n                  customIcons={customIcons}\n                />\n              )\n              : (/* This is an access (e.g. walk/bike/etc.) leg */\n                <AccessLegBody\n                  leg={leg}\n                  legIndex={legIndex}\n                  legMode={getLegMode(this.props.companies, leg).legMode}\n                  routingType={this.props.routingType}\n                  setActiveLeg={this.props.setActiveLeg}\n                  timeOptions={timeOptions}\n                  followsTransit={followsTransit}\n                  customIcons={customIcons}\n                />\n              )\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n"]}