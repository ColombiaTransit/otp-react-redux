{"version":3,"sources":["itinerary-carousel.js"],"names":["ItineraryCarousel","props","onClick","activeItinerary","itineraries","setActiveItinerary","length","index","indexLatest","itineraryClass","hideHeader","pending","views","map","itinerary","React","createElement","key","expanded","_onItineraryClick","_onLeftClick","_onRightClick","_onSwipe","Component","PropTypes","array","bool","number","func","setActiveLeg","setActiveStep","companies","string","DefaultItinerary","mapStateToProps","state","ownProps","activeSearch","otp","response","plan","activeLeg","activeStep","currentQuery","timeFormat","coreUtils","time","getTimeFormat","config","mapDispatchToProps","dispatch","leg","step"],"mappings":"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","sourcesContent":["import coreUtils from '@opentripplanner/core-utils'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { Button } from 'react-bootstrap'\nimport { connect } from 'react-redux'\nimport SwipeableViews from 'react-swipeable-views'\n\nimport { setActiveItinerary, setActiveLeg, setActiveStep } from '../../actions/narrative'\nimport Icon from './icon'\nimport DefaultItinerary from './default/default-itinerary'\nimport Loading from './loading'\nimport { getActiveItineraries, getActiveSearch } from '../../util/state'\n\nclass ItineraryCarousel extends Component {\n  state = {}\n  static propTypes = {\n    itineraries: PropTypes.array,\n    pending: PropTypes.bool,\n    activeItinerary: PropTypes.number,\n    hideHeader: PropTypes.bool,\n    itineraryClass: PropTypes.func,\n    onClick: PropTypes.func,\n    setActiveItinerary: PropTypes.func,\n    setActiveLeg: PropTypes.func,\n    setActiveStep: PropTypes.func,\n    expanded: PropTypes.bool,\n    companies: PropTypes.string\n  }\n\n  static defaultProps = {\n    itineraryClass: DefaultItinerary\n  }\n\n  _onItineraryClick = () => {\n    if (typeof this.props.onClick === 'function') this.props.onClick()\n  }\n\n  _onLeftClick = () => {\n    const { activeItinerary, itineraries, setActiveItinerary } = this.props\n    setActiveItinerary(activeItinerary === 0 ? itineraries.length - 1 : activeItinerary - 1)\n  }\n\n  _onRightClick = () => {\n    const { activeItinerary, itineraries, setActiveItinerary } = this.props\n    setActiveItinerary(activeItinerary === itineraries.length - 1 ? 0 : activeItinerary + 1)\n  }\n\n  _onSwipe = (index, indexLatest) => {\n    this.props.setActiveItinerary(index)\n  }\n\n  render () {\n    const { activeItinerary, itineraries, itineraryClass, hideHeader, pending } = this.props\n    if (pending) return <Loading small />\n    if (!itineraries) return null\n\n    const views = itineraries.map((itinerary, index) => {\n      return React.createElement(itineraryClass, {\n        itinerary,\n        index,\n        key: index,\n        expanded: this.props.expanded,\n        onClick: this._onItineraryClick,\n        ...this.props\n      })\n    })\n\n    return (\n      <div className='options itinerary'>\n        {hideHeader\n          ? null\n          : <div className='header carousel-header'>\n            <Button\n              className='carousel-left-button carousel-button'\n              disabled={activeItinerary === 0}\n              onClick={this._onLeftClick}>\n              <Icon type='arrow-left' />\n            </Button>\n            <div\n              className='text-center carousel-header-text'>\n              {activeItinerary + 1} of {itineraries.length}\n            </div>\n            <Button\n              disabled={activeItinerary === itineraries.length - 1}\n              className='pull-right carousel-right-button carousel-button'\n              onClick={this._onRightClick}>\n              <Icon type='arrow-right' />\n            </Button>\n          </div>\n        }\n        <SwipeableViews\n          index={activeItinerary}\n          onChangeIndex={this._onSwipe}\n        >{views}</SwipeableViews>\n      </div>\n    )\n  }\n}\n\n// connect to the redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  const activeSearch = getActiveSearch(state.otp)\n  const itineraries = activeSearch && activeSearch.response && activeSearch.response.plan\n    ? getActiveItineraries(state.otp)\n    : null\n\n  return {\n    itineraries,\n    pending: activeSearch && activeSearch.pending,\n    activeItinerary: activeSearch && activeSearch.activeItinerary,\n    activeLeg: activeSearch && activeSearch.activeLeg,\n    activeStep: activeSearch && activeSearch.activeStep,\n    companies: state.otp.currentQuery.companies,\n    timeFormat: coreUtils.time.getTimeFormat(state.otp.config)\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    setActiveItinerary: (index) => { dispatch(setActiveItinerary({ index })) },\n    setActiveLeg: (index, leg) => { dispatch(setActiveLeg({ index, leg })) },\n    setActiveStep: (index, step) => { dispatch(setActiveStep({ index, step })) }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ItineraryCarousel)\n"]}