{"version":3,"sources":["trip-viewer.js"],"names":["TripViewer","_backClicked","props","clearViewedTrip","findTrip","tripId","viewedTrip","tripData","hideBackButton","languageConfig","tripViewer","clear","route","shortName","longName","wheelchairAccessible","bikesAllowed","stops","stopTimes","map","stop","i","stripMapLineClass","length","highlightClass","fromIndex","toIndex","scheduledDeparture","id","name","Component","propTypes","PropTypes","bool","object","mapStateToProps","state","ownProps","otp","ui","transitIndex","trips","config","language","mapDispatchToProps","setLocation"],"mappings":"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","file":"trip-viewer.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, Label } from 'react-bootstrap'\nimport { connect } from 'react-redux'\n\nimport Icon from '../narrative/icon'\nimport ViewStopButton from './view-stop-button'\n\nimport { clearViewedTrip } from '../../actions/ui'\nimport { findTrip } from '../../actions/api'\nimport { setLocation } from '../../actions/map'\n\nimport { formatStopTime } from '../../util/time'\n\nclass TripViewer extends Component {\n  static propTypes = {\n    hideBackButton: PropTypes.bool,\n    tripData: PropTypes.object,\n    viewedTrip: PropTypes.object\n  }\n\n  _backClicked = () => {\n    this.props.clearViewedTrip()\n  }\n\n  componentWillMount () {\n    this.props.findTrip({tripId: this.props.viewedTrip.tripId})\n  }\n\n  render () {\n    const { viewedTrip, tripData, hideBackButton, languageConfig } = this.props\n\n    return (\n      <div className='trip-viewer'>\n        {/* Header Block */}\n        <div className='trip-viewer-header'>\n          {/* Back button */}\n          {!hideBackButton && (\n            <div className='back-button-container'>\n              <Button\n                bsSize='small'\n                onClick={this._backClicked}\n              ><Icon type='arrow-left' />Back</Button>\n            </div>\n          )}\n\n          {/* Header Text */}\n          <div className='header-text'>\n            {languageConfig.tripViewer || 'Trip Viewer'}\n          </div>\n          <div style={{ clear: 'both' }} />\n        </div>\n\n        <div className='trip-viewer-body'>\n          {/* Basic Trip Info */}\n          {tripData && (\n            <div>\n              {/* Route name */}\n              <div>Route: <b>{tripData.route.shortName}</b> {tripData.route.longName}</div>\n\n              {/* Wheelchair/bike accessibility badges, if applicable */}\n              <h4>\n                {tripData.wheelchairAccessible === 1 &&\n                  <Label bsStyle='primary'>\n                    <Icon type='wheelchair-alt' /> Accessible\n                  </Label>\n                }\n                {' '}\n                {tripData.bikesAllowed === 1 &&\n                  <Label bsStyle='success'>\n                    <Icon type='bicycle' /> Allowed\n                  </Label>\n                }\n              </h4>\n            </div>\n          )}\n\n          {/* Stop Listing */}\n          {tripData && tripData.stops && tripData.stopTimes && (\n            tripData.stops.map((stop, i) => {\n              // determine whether to use special styling for first/last stop\n              let stripMapLineClass = 'strip-map-line'\n              if (i === 0) stripMapLineClass = 'strip-map-line-first'\n              else if (i === tripData.stops.length - 1) stripMapLineClass = 'strip-map-line-last'\n\n              // determine whether to show highlight in strip map\n              let highlightClass\n              if (i === viewedTrip.fromIndex) highlightClass = 'strip-map-highlight-first'\n              else if (i > viewedTrip.fromIndex && i < viewedTrip.toIndex) highlightClass = 'strip-map-highlight'\n              else if (i === viewedTrip.toIndex) highlightClass = 'strip-map-highlight-last'\n\n              return (\n                <div key={i}>\n                  {/* the departure time */}\n                  <div className='stop-time'>\n                    {formatStopTime(tripData.stopTimes[i].scheduledDeparture)}\n                  </div>\n\n                  {/* the vertical strip map */}\n                  <div className='strip-map-container'>\n                    { highlightClass && <div className={highlightClass} /> }\n                    <div className={stripMapLineClass} />\n                    <div className='strip-map-icon'><Icon type='circle' /></div>\n                  </div>\n\n                  {/* the stop-viewer button */}\n                  <div className='stop-button-container'>\n                    <ViewStopButton stopId={stop.id} text='View' />\n                  </div>\n\n                  {/* the main stop label */}\n                  <div className='stop-name'>\n                    {stop.name}\n                  </div>\n\n                  <div style={{ clear: 'both' }} />\n\n                </div>\n              )\n            })\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const viewedTrip = state.otp.ui.viewedTrip\n  return {\n    tripData: state.otp.transitIndex.trips[viewedTrip.tripId],\n    viewedTrip,\n    languageConfig: state.otp.config.language\n  }\n}\n\nconst mapDispatchToProps = {\n  clearViewedTrip,\n  findTrip,\n  setLocation\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TripViewer)\n"]}