{"version":3,"sources":["endpoint.js"],"names":["Endpoint","_rememberAsHome","rememberPlace","props","location","id","name","icon","forgettable","type","_rememberAsWork","_onDragEnd","e","setLocation","target","getLatLng","reverseGeocode","position","lat","lon","fgStyle","fontSize","width","height","bgStyle","paddingTop","iconHtml","ReactDOMServer","renderToStaticMarkup","opacity","marginLeft","marginTop","color","html","className","Component"],"mappings":"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","file":"endpoint.js","sourcesContent":["import React, { Component } from 'react'\nimport ReactDOMServer from 'react-dom/server'\n\nimport { Button } from 'react-bootstrap'\nimport { Marker, Popup } from 'react-leaflet'\nimport { divIcon } from 'leaflet'\n\nimport { constructLocation } from '../../util/map'\nimport LocationIcon from '../icons/location-icon'\n\nexport default class Endpoint extends Component {\n  _rememberAsHome = () => {\n    const { rememberPlace } = this.props\n    const location = Object.assign({}, this.props.location)\n    location.id = 'home'\n    location.name = `Home (${location.name})`\n    location.icon = 'home'\n    location.forgettable = true\n    location.type = 'home'\n    rememberPlace({ type: 'home', location })\n  }\n\n  _rememberAsWork = () => {\n    const { rememberPlace } = this.props\n    const location = Object.assign({}, this.props.location)\n    location.id = 'work'\n    location.name = `Work (${location.name})`\n    location.icon = 'briefcase'\n    location.forgettable = true\n    location.type = 'work'\n    rememberPlace({ type: 'work', location })\n  }\n\n  _onDragEnd = (e) => {\n    const { setLocation, type } = this.props\n    const location = constructLocation(e.target.getLatLng())\n    setLocation({ type, location, reverseGeocode: true })\n  }\n\n  render () {\n    const { type, location } = this.props\n    const position = location && location.lat && location.lon ? [location.lat, location.lon] : null\n    if (!position) return null\n    const fgStyle = { fontSize: 24, width: 32, height: 32 }\n    const bgStyle = { fontSize: 32, width: 32, height: 32, paddingTop: 1 }\n    const iconHtml = ReactDOMServer.renderToStaticMarkup(\n      <span title={location.name} className={`fa-stack endpoint-${type}-icon`} style={{ opacity: 1.0, marginLeft: -10, marginTop: -7 }}>\n        {type === 'from'\n          // From icon should have white circle background\n          ? <i className='fa-stack-1x fa fa-circle' style={{color: '#fff', ...fgStyle}} />\n          : <span>\n            <LocationIcon type={type} className='fa-stack-1x' style={{color: '#333', ...bgStyle}} />\n            <i className='fa-stack-1x fa fa-circle' style={{color: '#fff', ...bgStyle, fontSize: 12, marginTop: -4}} />\n          </span>\n        }\n        <LocationIcon type={type} className='fa-stack-1x' style={fgStyle} />\n      </span>\n    )\n\n    return (\n      <Marker\n        draggable\n        icon={divIcon({ html: iconHtml, className: '' })}\n        position={position}\n        onDragEnd={this._onDragEnd}>\n        <Popup>\n          <div>\n            <Button onClick={this._rememberAsHome}>Set as home</Button>\n            <Button onClick={this._rememberAsWork}>Set as work</Button>\n          </div>\n        </Popup>\n      </Marker>\n    )\n  }\n}\n"]}