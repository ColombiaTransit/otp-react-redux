{"version":3,"sources":["date-time-selector.js"],"names":["DateTimeSelector","props","_onDateChange","evt","setQueryParam","date","target","value","_onDayOfWeekChange","weekday","format","_onEndTimeChange","endTime","_onStartTimeChange","startTime","_onTimeChange","time","_setDepartArrive","type","departArrive","state","dateFocused","marginBottom","map","i","marginTop","width","display","Component","propTypes","PropTypes","string","location","object","label","profile","bool","func","DateOptionButton","_onClick","setDepartArrive","active","text","classNames","push","join","mapStateToProps","ownProps","otp","currentQuery","config","mapDispatchToProps"],"mappings":"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","file":"date-time-selector.js","sourcesContent":["// import moment from 'moment'\nimport React, {PropTypes, Component} from 'react'\nimport { Form, FormGroup, FormControl, Row, Col, Button } from 'react-bootstrap'\n// import { SingleDatePicker } from 'react-dates'\nimport { connect } from 'react-redux'\nimport moment from 'moment'\n\nimport { setQueryParam } from '../../actions/form'\n\nclass DateTimeSelector extends Component {\n  static propTypes = {\n    date: PropTypes.string,\n    departArrive: PropTypes.string,\n    time: PropTypes.string,\n    location: PropTypes.object,\n    label: PropTypes.string,\n    profile: PropTypes.bool,\n    startTime: PropTypes.string,\n    endTime: PropTypes.string,\n\n    setQueryParam: PropTypes.func,\n    type: PropTypes.string // replace with locationType?\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      dateFocused: false\n    }\n  }\n\n  _onDateChange = (evt) => {\n    this.props.setQueryParam({ date: evt.target.value })\n  }\n\n  _onDayOfWeekChange = evt => {\n    this.props.setQueryParam({\n      date: moment().weekday(evt.target.value).format('YYYY-MM-DD')\n    })\n  }\n\n  _onEndTimeChange = (evt) => {\n    this.props.setQueryParam({ endTime: evt.target.value })\n  }\n\n  _onStartTimeChange = (evt) => {\n    this.props.setQueryParam({ startTime: evt.target.value })\n  }\n\n  _onTimeChange = (evt) => {\n    this.props.setQueryParam({ time: evt.target.value })\n  }\n\n  _setDepartArrive = (type) => {\n    this.props.setQueryParam({ departArrive: type })\n    if (type === 'NOW') {\n      this.props.setQueryParam({\n        date: moment().format('YYYY-MM-DD'),\n        time: moment().format('HH:mm')\n      })\n    }\n  }\n\n  render () {\n    const { departArrive, date, time, startTime, endTime } = this.props\n\n    // TODO: restore for profile mode\n    /*if (this.props.profile) {\n      const dowOptions = [{\n        text: 'WEEKDAY',\n        weekday: 3\n      }, {\n        text: 'SATURDAY',\n        weekday: 6\n      }, {\n        text: 'SUNDAY',\n        weekday: 0\n      }]\n\n      return (\n        <Form>\n          <FormGroup style={{marginBottom: '15px'}} className='date-time-selector'>\n            <Row>\n              <Col xs={12}>\n                <FormControl\n                  className='dropdown-selector'\n                  componentClass='select'\n                  style={{width: '100%'}}\n                  onChange={this._onDayOfWeekChange}\n                >\n                  {dowOptions.map((o, i) => (\n                    <option key={i} value={o.weekday}>{o.text}</option>\n                  ))}\n                </FormControl>\n              </Col>\n            </Row>\n            <Row style={{ marginTop: 20 }}>\n              <Col xs={5}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  required='true'\n                  value={startTime}\n                  style={{width: '100%'}}\n                  onChange={this._onStartTimeChange}\n                />\n              </Col>\n              <Col xs={2}>TO</Col>\n              <Col xs={5}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  required='true'\n                  value={endTime}\n                  style={{width: '100%'}}\n                  onChange={this._onEndTimeChange}\n                />\n              </Col>\n            </Row>\n          </FormGroup>\n        </Form>\n      )\n    }*/\n\n\n    return (\n      <Form>\n        <FormGroup style={{marginBottom: '15px'}} className='date-time-selector'>\n          <Row>\n            {['NOW', 'DEPART', 'ARRIVE'].map((type, i) => (\n              <Col key={i} xs={4}>\n                <DateOptionButton type={type} active={departArrive === type} setDepartArrive={this._setDepartArrive} />\n              </Col>\n            ))}\n          </Row>\n          {departArrive !== 'NOW' && (\n            <Row style={{ marginTop: 20 }}>\n              <Col xs={6}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  value={time}\n                  required='true'\n                  onChange={this._onTimeChange}\n                  style={{width: '100%', display: departArrive === 'NOW' && 'none'}}\n                />\n              </Col>\n              <Col xs={6}>\n                <FormControl\n                  className='date-selector'\n                  type='date'\n                  value={date}\n                  required='true'\n                  onChange={this._onDateChange}\n                  style={{width: '100%', display: departArrive === 'NOW' && 'none'}}\n                />\n              </Col>\n            </Row>\n          )}\n        </FormGroup>\n      </Form>\n    )\n  }\n}\n\nclass DateOptionButton extends Component {\n  _onClick = () => {\n    this.props.setDepartArrive(this.props.type)\n  }\n\n  render () {\n    const { active, type } = this.props\n    let text = type\n    if (type === 'NOW') text = 'Leave now'\n    if (type === 'DEPART') text = 'Depart at'\n    if (type === 'ARRIVE') text = 'Arrive by'\n    const classNames = ['depart-arrive-button']\n    if (active) classNames.push('active')\n    return <Button className={classNames.join(' ')} onClick={this._onClick}>{text}</Button>\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const { departArrive, date, time, startTime, endTime } = state.otp.currentQuery\n  return {\n    config: state.otp.config,\n    departArrive,\n    date,\n    time,\n    startTime,\n    endTime\n  }\n}\n\nconst mapDispatchToProps = {\n  setQueryParam\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DateTimeSelector)\n"]}